
  <div class="container">
    <form [formGroup]="formulario" (ngSubmit)="salvarUnidade()">

      <div class="row">
        <div class="col-6 col-md-4 offset-md-2">
          <div class="form-group" [ngClass]="aplicaCssErro('id')">
            <label for="id">Id</label>
            <input type="text" class="form-control" id="id" formControlName="id" [value]="unidade.id" readonly/>
            <form-erro-view [mostrarErro]="isFieldInvalid('id')"
                            msgErro="Id é obrigatório">
            </form-erro-view>
          </div>
        </div>
        <nav class="navbar">
          <button type="submit" class="nav-item btn btn-primary" [disabled]="formulario.invalid">Salvar</button>
        </nav>
      </div>

      <div class="row">
        <div class="col-12 col-md-8 offset-md-2">
          <div class="form-group" [ngClass]="aplicaCssErro('nome')">
            <label for="nome">Nome</label>
            <input type="text" class="form-control" id="nome" formControlName="nome" [value]="unidade.nome" (input)="unidade.nome = $event.target.value" />
            <form-erro-view [mostrarErro]="isFieldInvalid('nome')"
                            msgErro="Nome é obrigatório">
            </form-erro-view>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-12 col-md-4 offset-md-2" [ngClass]="aplicaCssErro('codigo')">
          <label for="codigo">Código Preferencial:</label>
          <input type="text" class="form-control" id="codigo" formControlName="codigo" [value]="unidade.codigo" readonly/>
          <form-erro-view [mostrarErro]="isFieldInvalid('codigo')"
                          msgErro="Código é obrigatório e deve ter no máximo 8 caracteres">
          </form-erro-view>
        </div>

        <div class="form-group col-12 col-md-4">
          <label for="codigoNovo">Adicionar mais códigos:</label>
          <div class="input-group">
            <input type="text" class="form-control" id="codigoNovo" #codigoNovo formControlName="codigoNovo"/>
            <div class="input-group-apend">
              <button class="btn btn-primary" type="button" (click)="adicionarCodigo(codigoNovo.value)">
                <i class="fas fa-plus-circle"></i>
              </button>
            </div>
          </div>
          <form-erro-view [mostrarErro]="false"
                          msgErro="Código é obrigatório e deve ter no máximo 8 caracteres">
          </form-erro-view>
        </div>
      </div>


      <div class="row justify-content-center">
        <div class="table-responsive col-12 col-md-8 mt-5">
          <table class="table table-striped table-bordered table-hover" responsive="true">
            <thead class="thead-dark">
              <tr>
                <th class="text-center">Códigos </th>
                <th class="text-center">Preferencial</th>
                <th class="text-center">Ações</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let codigo of unidade?.codigos" >
                <td class="text-center">{{codigo}}</td>
                <td class="text-center">
                  <i class="fas fa-check-square text-success" *ngIf="codigo == unidade.codigo"></i>
                <td class="text-center">
                  <a href="#" title="Código preferencial" data-toggle="tooltip" (click)="setPreferencial(codigo)">
                    <i class="fas fa-check-square text-success mr-3"> </i>
                  </a>

                  <a href="#" title="Editar" data-toggle="tooltip" (click)="editarCodigo(codigo)">
                    <i class="fas fa-edit text-warning mr-3"></i>
                  </a>
                  <a href="#" title="Excluir" data-toggle="tooltip" (click)="deletarCodigo(codigo)">
                    <i class="fas fa-trash text-danger"></i>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </form>
  </div>
  

<form-debug [form]="formulario" ></form-debug>








